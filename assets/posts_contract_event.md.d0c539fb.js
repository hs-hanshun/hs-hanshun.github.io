import{_ as e,o as a,c as t,f as d}from"./app.0387de29.js";var r="/assets/evm-log.42750d8d.png";const v='{"title":"Solidity\u4E8B\u4EF6","description":"event(\u4E8B\u4EF6)","frontmatter":{"date":"2023-01-11T00:00:00.000Z","title":"Solidity\u4E8B\u4EF6","tags":["\u667A\u80FD\u5408\u7EA6","Solidity"],"description":"event(\u4E8B\u4EF6)"},"headers":[{"level":2,"title":"\u4E8B\u4EF6","slug":"\u4E8B\u4EF6"},{"level":3,"title":"\u58F0\u660E\u4E8B\u4EF6","slug":"\u58F0\u660E\u4E8B\u4EF6"},{"level":3,"title":"\u91CA\u653E\u4E8B\u4EF6","slug":"\u91CA\u653E\u4E8B\u4EF6"},{"level":2,"title":"EVM\u65E5\u5FD7","slug":"evm\u65E5\u5FD7"},{"level":3,"title":"\u4E3B\u9898(Topics)","slug":"\u4E3B\u9898-topics"},{"level":3,"title":"\u6570\u636E(Data)","slug":"\u6570\u636E-data"}],"relativePath":"posts/contract/event.md"}',i={},n=d(`<h1 id="solidity\u4E8B\u4EF6" tabindex="-1">Solidity\u4E8B\u4EF6 <a class="header-anchor" href="#solidity\u4E8B\u4EF6" aria-hidden="true">#</a></h1><h2 id="\u4E8B\u4EF6" tabindex="-1">\u4E8B\u4EF6 <a class="header-anchor" href="#\u4E8B\u4EF6" aria-hidden="true">#</a></h2><p>Solidity\u4E2D\u7684\u4E8B\u4EF6(event)\u662FEVM\u4E0A\u7684\u65E5\u5FD7\u62BD\u8C61\uFF0C\u5B83\u5177\u6709\u4E24\u4E2A\u7279\u70B9\uFF1A</p><ul><li>\u54CD\u5E94\uFF1A\u5E94\u7528\u7A0B\u5E8F\uFF08ethers.js\uFF09\u53EF\u4EE5\u901A\u8FC7RPC\u63A5\u53E3\u8BA2\u9605\u548C\u76D1\u542C\u8FD9\u4E9B\u4E8B\u4EF6\uFF0C\u5E76\u5728\u524D\u7AEF\u505A\u54CD\u5E94\u3002</li><li>\u7ECF\u6D4E\uFF1A\u4E8B\u4EF6\u662FEVM\u4E0A\u6BD4\u8F83\u7ECF\u6D4E\u7684\u5B58\u50A8\u6570\u636E\u7684\u65B9\u5F0F\uFF0C\u6BCF\u4E2A\u5927\u6982\u6D88\u80172,000 gas\uFF1B\u76F8\u6BD4\u4E4B\u4E0B\uFF0C\u94FE\u4E0A\u5B58\u50A8\u4E00\u4E2A\u65B0\u53D8\u91CF\u81F3\u5C11\u9700\u898120,000 gas\u3002</li></ul><h3 id="\u58F0\u660E\u4E8B\u4EF6" tabindex="-1">\u58F0\u660E\u4E8B\u4EF6 <a class="header-anchor" href="#\u58F0\u660E\u4E8B\u4EF6" aria-hidden="true">#</a></h3><p>\u4E8B\u4EF6\u7684\u58F0\u660E\u7531event\u5173\u952E\u5B57\u5F00\u5934\uFF0C\u63A5\u7740\u662F\u4E8B\u4EF6\u540D\u79F0\uFF0C\u62EC\u53F7\u91CC\u9762\u5199\u597D\u4E8B\u4EF6\u9700\u8981\u8BB0\u5F55\u7684\u53D8\u91CF\u7C7B\u578B\u548C\u53D8\u91CF\u540D\u3002\u4EE5ERC20\u4EE3\u5E01\u5408\u7EA6\u7684Transfer\u4E8B\u4EF6\u4E3A\u4F8B\uFF1A</p><div class="language-"><pre><code>event Transfer(address indexed from, address indexed to, uint256 value);
</code></pre></div><p>\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\uFF0CTransfer\u4E8B\u4EF6\u5171\u8BB0\u5F55\u4E863\u4E2A\u53D8\u91CFfrom\uFF0Cto\u548Cvalue\uFF0C\u5206\u522B\u5BF9\u5E94\u4EE3\u5E01\u7684\u8F6C\u8D26\u5730\u5740\uFF0C\u63A5\u6536\u5730\u5740\u548C\u8F6C\u8D26\u6570\u91CF\uFF0C\u5176\u4E2Dfrom\u548Cto\u524D\u9762\u5E26\u6709indexed\u5173\u952E\u5B57\uFF0C\u4ED6\u4EEC\u4F1A\u4FDD\u5B58\u5728\u4EE5\u592A\u574A\u865A\u62DF\u673A\u65E5\u5FD7\u7684topics\u4E2D\uFF0C\u65B9\u4FBF\u4E4B\u540E\u68C0\u7D22\u3002</p><h3 id="\u91CA\u653E\u4E8B\u4EF6" tabindex="-1">\u91CA\u653E\u4E8B\u4EF6 <a class="header-anchor" href="#\u91CA\u653E\u4E8B\u4EF6" aria-hidden="true">#</a></h3><p>\u6211\u4EEC\u53EF\u4EE5\u5728\u51FD\u6570\u91CC\u91CA\u653E\u4E8B\u4EF6\u3002\u5728\u4E0B\u9762\u7684\u4F8B\u5B50\u4E2D\uFF0C\u6BCF\u6B21\u7528_transfer()\u51FD\u6570\u8FDB\u884C\u8F6C\u8D26\u64CD\u4F5C\u7684\u65F6\u5019\uFF0C\u90FD\u4F1A\u91CA\u653ETransfer\u4E8B\u4EF6\uFF0C\u5E76\u8BB0\u5F55\u76F8\u5E94\u7684\u53D8\u91CF\u3002</p><div class="language-"><pre><code>    // \u5B9A\u4E49_transfer\u51FD\u6570\uFF0C\u6267\u884C\u8F6C\u8D26\u903B\u8F91
    function _transfer(address from, address to, uint256 amount) external {

        _balances[from] = 10000000; // \u7ED9\u8F6C\u8D26\u5730\u5740\u4E00\u4E9B\u521D\u59CB\u4EE3\u5E01

        _balances[from] -=  amount; // from\u5730\u5740\u51CF\u53BB\u8F6C\u8D26\u6570\u91CF
        _balances[to] += amount; // to\u5730\u5740\u52A0\u4E0A\u8F6C\u8D26\u6570\u91CF

        // \u91CA\u653E\u4E8B\u4EF6
        emit Transfer(from, to, amount);
    }
</code></pre></div><h2 id="evm\u65E5\u5FD7" tabindex="-1">EVM\u65E5\u5FD7 <a class="header-anchor" href="#evm\u65E5\u5FD7" aria-hidden="true">#</a></h2><p>\u4EE5\u592A\u574A\u865A\u62DF\u673A\uFF08EVM\uFF09\u7528\u65E5\u5FD7Log\u6765\u5B58\u50A8Solidity\u4E8B\u4EF6\uFF0C\u6BCF\u6761\u65E5\u5FD7\u8BB0\u5F55\u90FD\u5305\u542B\u4E3B\u9898topics\u548C\u6570\u636Edata\u4E24\u90E8\u5206\u3002 <img src="`+r+`" alt=""></p><h3 id="\u4E3B\u9898-topics" tabindex="-1">\u4E3B\u9898(Topics) <a class="header-anchor" href="#\u4E3B\u9898-topics" aria-hidden="true">#</a></h3><p>\u65E5\u5FD7\u7684\u7B2C\u4E00\u90E8\u5206\u662F\u4E3B\u9898\u6570\u7EC4\uFF0C\u7528\u4E8E\u63CF\u8FF0\u4E8B\u4EF6\uFF0C\u957F\u5EA6\u4E0D\u80FD\u8D85\u8FC74\u3002\u5B83\u7684\u7B2C\u4E00\u4E2A\u5143\u7D20\u662F\u4E8B\u4EF6\u7684\u7B7E\u540D\uFF08\u54C8\u5E0C\uFF09\u3002\u5BF9\u4E8E\u4E0A\u9762\u7684Transfer\u4E8B\u4EF6\uFF0C\u5B83\u7684\u7B7E\u540D\u5C31\u662F\uFF1A</p><div class="language-"><pre><code>keccak256(&quot;Transfer(addrses,address,uint256)&quot;)

//0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef
</code></pre></div><p>\u9664\u4E86\u4E8B\u4EF6\u7B7E\u540D\uFF0C\u4E3B\u9898\u8FD8\u53EF\u4EE5\u5305\u542B\u81F3\u591A3\u4E2Aindexed\u53C2\u6570\uFF0C\u4E5F\u5C31\u662FTransfer\u4E8B\u4EF6\u4E2D\u7684from\u548Cto\u3002</p><p>indexed\u6807\u8BB0\u7684\u53C2\u6570\u53EF\u4EE5\u7406\u89E3\u4E3A\u68C0\u7D22\u4E8B\u4EF6\u7684\u7D22\u5F15\u201C\u952E\u201D\uFF0C\u65B9\u4FBF\u4E4B\u540E\u641C\u7D22\u3002\u6BCF\u4E2A indexed \u53C2\u6570\u7684\u5927\u5C0F\u4E3A\u56FA\u5B9A\u7684256\u6BD4\u7279\uFF0C\u5982\u679C\u53C2\u6570\u592A\u5927\u4E86\uFF08\u6BD4\u5982\u5B57\u7B26\u4E32\uFF09\uFF0C\u5C31\u4F1A\u81EA\u52A8\u8BA1\u7B97\u54C8\u5E0C\u5B58\u50A8\u5728\u4E3B\u9898\u4E2D\u3002</p><h3 id="\u6570\u636E-data" tabindex="-1">\u6570\u636E(Data) <a class="header-anchor" href="#\u6570\u636E-data" aria-hidden="true">#</a></h3><p>\u4E8B\u4EF6\u4E2D\u4E0D\u5E26 indexed\u7684\u53C2\u6570\u4F1A\u88AB\u5B58\u50A8\u5728 data \u90E8\u5206\u4E2D\uFF0C\u53EF\u4EE5\u7406\u89E3\u4E3A\u4E8B\u4EF6\u7684\u201C\u503C\u201D\u3002data \u90E8\u5206\u7684\u53D8\u91CF\u4E0D\u80FD\u88AB\u76F4\u63A5\u68C0\u7D22\uFF0C\u4F46\u53EF\u4EE5\u5B58\u50A8\u4EFB\u610F\u5927\u5C0F\u7684\u6570\u636E\u3002\u56E0\u6B64\u4E00\u822C data \u90E8\u5206\u53EF\u4EE5\u7528\u6765\u5B58\u50A8\u590D\u6742\u7684\u6570\u636E\u7ED3\u6784\uFF0C\u4F8B\u5982\u6570\u7EC4\u548C\u5B57\u7B26\u4E32\u7B49\u7B49\uFF0C\u56E0\u4E3A\u8FD9\u4E9B\u6570\u636E\u8D85\u8FC7\u4E86256\u6BD4\u7279\uFF0C\u5373\u4F7F\u5B58\u50A8\u5728\u4E8B\u4EF6\u7684 topic \u90E8\u5206\u4E2D\uFF0C\u4E5F\u662F\u4EE5\u54C8\u5E0C\u7684\u65B9\u5F0F\u5B58\u50A8\u3002\u53E6\u5916\uFF0Cdata \u90E8\u5206\u7684\u53D8\u91CF\u5728\u5B58\u50A8\u4E0A\u6D88\u8017\u7684gas\u76F8\u6BD4\u4E8E topic \u66F4\u5C11\u3002</p>`,20),s=[n];function o(l,c,h,p,f,u){return a(),t("div",null,s)}var m=e(i,[["render",o]]);export{v as __pageData,m as default};
